/*! backbone.includes - v0.1.1 - 2014-03-26 */(function(e,r){"use strict";if("function"==typeof define&&define.amd)define(["backbone","underscore"],function(e,t){return r(e,t)});else if("undefined"!=typeof exports){var t=require("underscore"),i=require("backbone");module.exports=r(i,t)}else e.querybuilder=r(e.Backbone,e._)})(this,function(e,r){"use strict";var t={provider:null,setProvider:function(t){this.provider=t,r.extend(e.Model.prototype,i),r.extend(e.Collection.prototype,i)}},i={include:function(){var e=[].slice.call(arguments),t=[];return r.each(e,function(e){t.push({field:e})}),this._rbQueryData=this._rbQueryData||{},this._rbQueryData.include=t,this},when:function(e){var t=[];return r.each(e,function(e,i){"string"==typeof e||"number"==typeof e?t.push({field:i,operator:"=",value:e}):"[object Array]"===toString.call(e)?t.push({field:i,operator:"in",value:e}):"object"==typeof e&&t.push({field:i,operator:r.keys(e)[0],value:r.values(e)[0]})}),this._rbQueryData=this._rbQueryData||{},this._rbQueryData.when=t,this},limit:function(e){return this._rbQueryData=this._rbQueryData||{},this._rbQueryData.limit=e,this},skip:function(e){return this._rbQueryData=this._rbQueryData||{},this._rbQueryData.skip=e,this},orderBy:function(e,t){var i,a;return"string"==typeof e?(i=e,a=t||"asc"):"object"==typeof e&&(i=r.keys(e)[0],a=r.values(e)[0]),this._rbQueryData=this._rbQueryData||{},this._rbQueryData.orderBy=this._rbQueryData.orderBy||[],this._rbQueryData.orderBy.push({field:i,direction:a}),this},sync:function(i,a,u){var n=t.provider.getFields(this._rbQueryData);return this._rbQueryData={},u.data=r.extend(n,u.data||{}),e.sync.call(this,i,a,u)}};return t});